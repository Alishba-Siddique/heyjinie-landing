(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44289,e=>{"use strict";e.s(["default",()=>s]);let t="https://stagingbackend.heyjinie.com/api/v1",a="/images/placeholder-blog.png",s=new class{async safeFetch(e,t){try{let a=new AbortController,s=setTimeout(()=>a.abort(),8e3),l=await fetch(e,{...t,signal:a.signal});if(clearTimeout(s),!l.ok)return console.error("[BlogService] HTTP Error: ".concat(l.status," → ").concat(e)),null;return await l.json()}catch(t){return t&&"object"==typeof t&&"name"in t&&"AbortError"===t.name?console.error("[BlogService] Request timed out:",e):console.error("[BlogService] Network or JSON error:",t),null}}async getAllBlogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,s="".concat(t,"/public/blogs?limit=").concat(e),l=await this.safeFetch(s);return(null==l?void 0:l.success)&&Array.isArray(l.data)?l.data.map(e=>{var t;return{...e,coverImageUrl:(null==(t=e.coverImageUrl)?void 0:t.trim())?e.coverImageUrl:a}}):(console.warn("[BlogService] Invalid blogs response"),[])}async getBlogById(e){var s;let l="".concat(t,"/public/blogs/").concat(e),r=await this.safeFetch(l);return(null==r?void 0:r.success)&&r.data?{...r.data,coverImageUrl:(null==(s=r.data.coverImageUrl)?void 0:s.trim())?r.data.coverImageUrl:a}:(console.warn("[BlogService] Blog not found for ID: ".concat(e)),null)}async getBlogBySlug(e){try{let t=(await this.getAllBlogs()).find(t=>t.slug===e);return t||console.warn("[BlogService] No blog found for slug: ".concat(e)),t||null}catch(e){return console.error("[BlogService] Error fetching blog by slug:",e),null}}async getComments(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=Date.now(),l="".concat(t,"/public/blogs/").concat(e,"/comments?limit=").concat(a,"&_t=").concat(s),r=await this.safeFetch(l);return(null==r?void 0:r.success)&&Array.isArray(r.data)?r.data.filter(e=>"approved"===e.status||!e.status):(console.warn("[BlogService] No comments found for blog ID: ".concat(e)),[])}async createComment(e,a){var s,l,r;let o="".concat(t,"/public/blogs/").concat(e,"/comments"),n=await this.safeFetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authorName:null==(s=a.authorName)?void 0:s.trim(),authorEmail:null==(l=a.authorEmail)?void 0:l.trim(),content:null==(r=a.content)?void 0:r.trim(),parentId:a.parentId||null})});return n?n.success?{success:!0,message:"✅ Comment submitted successfully! Awaiting approval."}:{success:!1,message:n.message||"❌ Failed to submit comment. Please try again later."}:{success:!1,message:"Network error. Please check your connection and try again."}}}},96706,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(92531),a=e.i(44466),s=e.i(1988),l=e.i(67426),r=e.i(38354),o=e.i(44289);function n(e){let{slug:n,initialBlog:c,recentBlogs:i}=e,[d,m]=(0,a.useState)(c),[u,h]=(0,a.useState)([]),[g,x]=(0,a.useState)(!1),[b,p]=(0,a.useState)(!0),[f,v]=(0,a.useState)({authorName:"",authorEmail:"",content:""}),[y,N]=(0,a.useState)(!1),[j,w]=(0,a.useState)(!1),[B,S]=(0,a.useState)(""),A=(0,a.useCallback)(async()=>{x(!0);try{let e=await o.default.getBlogBySlug(n);m(e),e&&C(e._id)}finally{x(!1)}},[n]);(0,a.useEffect)(()=>{d?C(d._id):A()},[n,d,A]);let C=async e=>{p(!0);try{let t=await o.default.getComments(e);h(t)}finally{p(!1)}},I=async()=>{if(!d||!f.authorName||!f.authorEmail||!f.content)return void S("All fields are required.");N(!0),S("");try{let e=await o.default.createComment(d._id,{authorName:f.authorName,authorEmail:f.authorEmail,content:f.content});e.success?(w(!0),v({authorName:"",authorEmail:"",content:""}),setTimeout(()=>{w(!1),C(d._id)},3e3)):S(e.message||"Failed to submit comment.")}catch(e){S("An error occurred. Please try again.")}finally{N(!1)}};return g?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#40A574]"})}):d?(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,t.jsxs)(l.default,{href:"/blog",className:"inline-flex items-center gap-2 text-[#40A574] hover:gap-3 transition-all duration-300 mb-8",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Blog"]}),(0,t.jsxs)(r.motion.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-12",children:[d.coverImageUrl&&(0,t.jsx)("div",{className:"relative w-full h-96 bg-gray-200",children:(0,t.jsx)(s.default,{src:d.coverImageUrl,alt:d.title,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"p-8",children:[d.tags&&d.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:d.tags.map((e,a)=>(0,t.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded-full",children:e},a))}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-[#333] mb-4",children:d.title}),(0,t.jsx)("div",{className:"prose prose-lg max-w-none text-[#666] mb-8",dangerouslySetInnerHTML:{__html:d.content}})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-[#333] mb-6",children:"Comments"}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-[#333] mb-4",children:"Leave a Comment"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",value:f.authorName,onChange:e=>v({...f,authorName:e.target.value}),placeholder:"Your name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#40A574]"}),(0,t.jsx)("input",{type:"email",value:f.authorEmail,onChange:e=>v({...f,authorEmail:e.target.value}),placeholder:"Your email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#40A574]"}),(0,t.jsx)("textarea",{rows:4,value:f.content,onChange:e=>v({...f,content:e.target.value}),placeholder:"Your comment",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#40A574]"}),(0,t.jsx)("button",{onClick:I,disabled:y,className:"bg-[#40A574] text-white px-6 py-2 rounded-lg hover:bg-[#359463] transition-colors disabled:opacity-50",children:y?"Submitting...":"Post Comment"}),B&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:B})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-[#333] mb-4",children:[u.length," Comment",1!==u.length?"s":""]}),b?(0,t.jsxs)("div",{className:"space-y-4 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"})]}):u.length>0?(0,t.jsx)("div",{className:"space-y-6",children:u.map(e=>(0,t.jsxs)("div",{className:"border-l-2 border-gray-200 pl-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"font-semibold text-[#333]",children:e.authorName}),(0,t.jsxs)("span",{className:"text-sm text-[#999]",children:["• ",new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})]})]}),(0,t.jsx)("p",{className:"text-[#666]",children:e.content})]},e._id))}):(0,t.jsx)("p",{className:"text-[#666]",children:"No comments yet. Be the first to comment!"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-[#333] mb-6",children:"Recent Blogs"}),i.length>0?(0,t.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,t.jsxs)(l.default,{href:"/blog/".concat(e.slug),className:"flex items-center space-x-4 hover:bg-gray-50 p-2 rounded-md transition-colors",children:[e.coverImageUrl&&(0,t.jsx)("div",{className:"relative w-16 h-16 shrink-0",children:(0,t.jsx)(s.default,{src:e.coverImageUrl,alt:e.title,fill:!0,className:"object-cover rounded-md"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-[#333] line-clamp-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-[#666] line-clamp-2",children:e.excerpt})]})]},e._id))}):(0,t.jsx)("p",{className:"text-[#666]",children:"No recent posts."})]}),j&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-sm w-full mx-4",children:[(0,t.jsx)("div",{className:"text-5xl text-[#40A57A] mb-4",children:"✓"}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Comment Submitted!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Your comment has been submitted successfully and is awaiting approval."}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"This message will close automatically."})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center px-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[#333] mb-4",children:"Blog Not Found"}),(0,t.jsx)(l.default,{href:"/blog",className:"text-[#40A574] hover:underline",children:"Back to Blog"})]})}}]);